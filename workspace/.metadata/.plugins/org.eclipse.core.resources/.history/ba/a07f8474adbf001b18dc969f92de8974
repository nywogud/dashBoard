package com.jhl.dashBoard.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.RequestMapping;

import com.jhl.dashBoard.chart.NumAttem;
import com.jhl.dashBoard.model.DataModel;
import com.jhl.dashBoard.service.DataService;


@CrossOrigin
@Controller
public class homeController {
	
	@Autowired
	DataService dataService;
	
	@RequestMapping("/")
	public String home(Model model) throws Exception {
		
		List<DataModel> resultList =  dataService.getNumAttem();
		
		for(int i=0; resultList.size()<i; i++) {
			
			
			System.out.println(resultList.get(i).getMethod());
			System.out.println(resultList.get(i).getNumAttem());
		}
		
		NumAttem numAttem = new NumAttem();
		String htmlString = numAttem.resultHtml(resultList);
		
		model.addAttribute("htmlString", htmlString);
		
		return "home";
	}
}
